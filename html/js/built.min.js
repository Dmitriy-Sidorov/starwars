window.onload=function(){var i,e=[{id:1,name:"Darth Vader",post:"Supreme Commander",image:"darthvader.png"},{id:2,name:"Wilhuf Tarkin",post:"Grand Moff",image:"wilhuftarkin.png",parent:1},{id:3,name:"Olson Krennic",post:"Director",image:"olsonkrennic.png",parent:1},{id:4,name:"Esmin Kesig",post:"Admiral",image:"esminkesig.png",parent:1},{id:5,name:"Phasma",post:"Captain",image:"phasma.png",parent:2},{id:6,name:"Will Shepard",post:"Commander",image:"willshepard.png",parent:2},{id:7,name:"Allin Prohq",post:"Ensign",image:"allinprohq.png",parent:2},{id:8,name:"Jah Batut",post:"Admiral",image:"jahbatut.png",parent:2},{id:9,name:"FN-23",post:"Soldier",image:"stromtrooper.png",parent:2},{id:10,name:"FN-24",post:"Soldier",image:"stromtrooper.png",parent:2},{id:11,name:"FN-25",post:"Soldier",image:"stromtrooper.png",parent:2},{id:12,name:"FN-26",post:"Soldier",image:"stromtrooper.png",parent:2},{id:13,name:"RN-46",post:"Soldier",image:"stromtrooper2.png",parent:2},{id:14,name:"RN-36",post:"Soldier",image:"stromtrooper2.png",parent:2},{id:15,name:"Darth Sidius",post:"Galactic Emperor",image:"darthsidius.png"},{id:16,name:"PN-65",post:"Soldier",image:"stromtrooper2.png",parent:3},{id:17,name:"PN-66",post:"Soldier",image:"stromtrooper2.png",parent:3},{id:18,name:"PN-67",post:"Soldier",image:"stromtrooper2.png",parent:3},{id:19,name:"TN-11",post:"Soldier",image:"stromtrooper2.png",parent:3},{id:20,name:"TN-12",post:"Soldier",image:"stromtrooper.png",parent:3},{id:21,name:"TN-13",post:"Soldier",image:"stromtrooper.png",parent:3},{id:22,name:"TN-14",post:"Soldier",image:"stromtrooper.png",parent:3},{id:23,name:"WN-23",post:"Soldier",image:"stromtrooper2.png",parent:3},{id:24,name:"WN-24",post:"Soldier",image:"stromtrooper2.png",parent:3},{id:25,name:"WN-25",post:"Soldier",image:"stromtrooper2.png",parent:3},{id:26,name:"WN-26",post:"Soldier",image:"stromtrooper2.png",parent:3},{id:27,name:"KN-19",post:"Soldier",image:"stromtrooper.png",parent:4},{id:28,name:"KN-20",post:"Soldier",image:"stromtrooper.png",parent:4},{id:29,name:"KN-21",post:"Soldier",image:"stromtrooper.png",parent:4},{id:30,name:"KN-22",post:"Soldier",image:"stromtrooper.png",parent:4}],r="",a="",d="",t=[],n=[],s=[],o=[];for(i=0;i<e.length;i++)o[i]=e[i].id;function p(i){return document.querySelector(i)}function l(){for(i=0;i<e.length;i++){var r=p("#priority"+i),a=r.dataset,d=p("#soldier"+e[i].id),n=d.dataset,s=p("#back"),o=p("#prev"),l=p("#next"),g=(Math.max.apply(null,t),Math.min.apply(null,t));a.priorityId&&r.classList.add("hidden"),n.personId&&d.classList.add("hidden"),a.priorityId===String(g-1)&&(r.classList.remove("hidden"),s.classList.add("hidden"),o.classList.add("hidden"),l.classList.add("hidden")),n.personId===String(g)&&d.classList.remove("hidden")}m()}function m(){var r=[],a=[];for(i=0;i<e.length;i++){var d=p("#soldier"+e[i].id).dataset;for(i=0;i<e.length;i++){var t=p("#soldier"+e[i].id),n=t.dataset;!1===t.classList.contains("hidden")&&(r[i]=e[i].id),t.classList.contains("hidden")&&n.personId>d.personId&&(a[i]=e[i].id)}}r=r.filter(Number),a=a.filter(Number);var s=r.length,o=a.length;console.log("j:"+o),console.log("y:"+s)}for(o.reverse(),function(){for(i=0;i<e.length;i++)void 0===e[i].parent&&(e[i].parent=0),t[i]=e[i].parent,n[i]=e[i].name,s[i]=e[i].post,d='<div id="priority'+(e[0].id-1)+'" data-priority-id="'+(t[0]-1)+'" class="hidden"><div class="ava"><img src="assets/avatars/empire.png" alt="Galactic Empire"></div><h1>Galactic Empire</h1><span>Imperial military</span></div>',r+='<div id="priority'+e[i].id+'" data-id="'+e[i].id+'" data-priority-id="'+t[i]+'" data-post="'+s[i]+'" data-name="'+n[i]+'" class="hidden"><div class="ava"><img src="assets/avatars/'+e[i].image+'" alt="'+e[i].name+'"></div><h1>'+e[i].name+"</h1><span>"+e[i].post+"</span></div>",a+='<div id="soldier'+e[i].id+'" data-id="'+e[i].id+'" data-person-id="'+t[i]+'" data-post="'+s[i]+'" data-name="'+n[i]+'" class="col-lg-6 person hidden"><div class="cursor"><div id="indent'+e[i].id+'" class="indent"><div class="number"><span id="length'+e[i].id+'">'+(o[i]-1)+'</span></div></div><div class="ava"><img src="assets/avatars/'+e[i].image+'" alt="'+e[i].name+'"><div class="img-hover"></div></div><div class="name"><h2>'+e[i].name+"</h2><span>"+e[i].post+"</span></div></div></div>";p("#outpriority").innerHTML=d+r,p("#out").innerHTML=a}(),l(),i=0;i<e.length;i++){p("#priority"+i).dataset;var g=p("#soldier"+e[i].id).dataset,c=p("#back"),h=p("#prev"),v=p("#next"),f=Math.max.apply(null,t),L=Math.min.apply(null,t),u=p("#indent"+e[i].id);function S(r){for(i=e.length-1;i>=0;i--)if(i<r&&e[r].parent===t[i])return p("#priority"+e[i].id);for(i=e.length-1;i>=r;i--)if(i!==r&&e[r].parent===t[i])return p("#priority"+e[i].id)}function y(r){for(i=r;i<e.length;i++)if(i>r&&e[r].parent===t[i])return p("#priority"+e[i].id);for(i=0;i<r;i++)if(i!==r&&e[r].parent===t[i])return p("#priority"+e[i].id)}"Darth Sidius"!==g.name&&g.personId!==String(f)||u.classList.add("hidden"),p("#logo").onclick=l,p("#soldier"+e[i].id).onclick=function(){for(i=0;i<e.length;i++){var r=p("#priority0");for("priority0"===r.id&&(r.classList.add("hidden"),c.classList.remove("hidden"),h.classList.remove("hidden"),v.classList.remove("hidden")),i=0;i<e.length;i++){var a=p("#priority"+e[i].id),d=p("#soldier"+e[i].id);a.id&&a.classList.add("hidden"),d.id&&d.classList.add("hidden")}for(i=0;i<e.length;i++){var t=p("#priority"+e[i].id),n=p("#soldier"+e[i].id).dataset;if(this.id==="soldier"+e[i].id){t.classList.remove("hidden");var s=Number(n.personId),o=s+1;for(i=0;i<e.length;i++){var l=p("#soldier"+e[i].id),g=l.dataset;n.personId===String(s)&&(l.classList.add("hidden"),g.personId===String(o)&&l.classList.remove("hidden"))}}}}m()},c.onclick=function(){for(i=0;i<e.length;i++){var r=p("#soldier"+e[i].id),a=r.dataset,d=Number(a.personId)-1,n=d+1;if(a.personId===String(t[i])&&!1===r.classList.contains("hidden")){for(i=0;i<e.length;i++){var s=p("#priority"+i),o=(s.dataset,p("#soldier"+e[i].id)),l=o.dataset;s.classList.add("hidden"),o.classList.add("hidden"),a.personId===String(n)&&("priority0"===s.id&&(a.personId===String(L+1)?(c.classList.add("hidden"),h.classList.add("hidden"),v.classList.add("hidden")):(c.classList.remove("hidden"),h.classList.remove("hidden"),v.classList.remove("hidden"))),l.personId===String(d)&&o.classList.remove("hidden"))}for(i=0;i<e.length;i++){var m=p("#priority"+i);if(m.dataset.priorityId===String(d-1)){m.classList.remove("hidden");break}}break}}},h.onclick=function(){for(i=0;i<e.length;i++){p("#soldier"+e[i].id).dataset;var r=p("#priority"+e[i].id);r.dataset;if(!1===r.classList.contains("hidden")){var a=S(i);if(a){r.classList.add("hidden"),a.classList.remove("hidden"),console.log("получил результат");break}p("#priority0").classList.remove("hidden"),console.log("не получил результат");break}}},v.onclick=function(){for(i=0;i<e.length;i++){p("#soldier"+e[i].id);var r=p("#priority"+e[i].id);r.dataset;if(!1===r.classList.contains("hidden")){var a=y(i);if(a){r.classList.add("hidden"),a.classList.remove("hidden"),console.log("получил результат");break}p("#priority0").classList.remove("hidden"),console.log("не получил результат");break}}}}};